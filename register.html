<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="UTF-8">
	<title>注册</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<meta name="renderer" content="webkit">
	<meta http-equiv="Cache-Control" content="no-siteapp" />

	<link rel="stylesheet" href="static/css/amazeui.css" />
	<link href="static/css/dlstyle.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="static/css/bootstrap.min.css" />
</head>

<body>

	<div class="login-boxtitle" style="height: 100px;">
		<div class="logoBig">
			<img src="static/images/logo.png" style="margin-left: 0px ; height: 100px;">
		</div>
	</div>

	<div class="login-banner" style="background: rgb(142,213,21);">
		<div class="login-main">
			<div class="login-banner-bg"><span></span><img width="400" src="static/images/act2.png" /></div>

			<div class="login-box" id="container">
				<h3 class="title">用户注册</h3>
				<h5 :style="colorStyle" class="time">&nbsp;{{tips}}</h5>
				<div class="clear"></div>
				<div class="login-form" style="background: none;">
					<form>
						<div class="user-name">
							<label for="user"><span class="glyphicon glyphicon-user" aria-hidden="true"></span></label>
							<input type="text" v-model="user.username" placeholder="邮箱/手机/用户名" @keyup="checkRegistInfo">
							<br />
						</div>

						<div class="user-pass" style="margin-top: 15px;">
							<label for="password"><span class="glyphicon glyphicon-lock"
									aria-hidden="true"></span></label>
							<input type="password" v-model="user.password" placeholder="请输入密码" @keyup="checkRegistInfo">
						</div>
						<div class="user-pass" style="margin-top: 15px;">
							<label for="password"><span class="glyphicon glyphicon-lock"
									aria-hidden="true"></span></label>
							<input type="password" v-model="user.repassword" placeholder="请再次输入密码"
								@keyup="checkRegistInfo">
						</div>
					</form>
				</div>
				<div class="login-links"><br /></div>
				<div class="am-cf">
					<input type="button" @click="doRegist" value="提交注册" class="am-btn am-btn-primary am-btn-sm">
				</div>
				<div class="partner"></div>
			</div>
		</div>
	</div>

	<div class="footer ">
		<div class="footer-hd ">

		</div>
		<div class="footer-bd ">
			<p>
				<a href="# ">联系我们</a>
				<a href="# ">网站地图</a>
			</p>
		</div>
	</div>

	<script type="text/javascript" src="static/js/vue.js"></script>
	<script type="text/javascript" src="static/js/axios.min.js"></script>
	<script type="text/javascript" src="static/js/base.js"></script>
	<script type="text/javascript">
		
		var vm = new Vue({
			el: "#container",
			data: {
				user: {
					username: "",
					password: "",
					repassword: ""
				},
				tips: "",
				colorStyle: "color: red",
				isRight: false,
			},
			methods: {
				doRegist: function () {
					if(!vm.isRight){
						vm.tips = "注册信息有误，请重新核对注册信息";
					}else{
						var url = baseUrl + "/user/register";
						axios.post(url,vm.user).then((res) => {
							var vo = res.data;
							if(vo.code == 10000){
								vm.tips = "注册成功~~，页面将在5秒后跳转";
								vm.colorStyle = "color:green";
								setTimeout(function(){
									window.location.href="login.html";		
								},5000)
							}else{
								vm.tips = vo.msg;
							}
	
						})
					}

				},
				checkRegistInfo: function () {
					//1.校验账号
					if (vm.user.username == "") {
						vm.tips = "请输入账号！";
						isRight = false;
					} else if (vm.user.username.length < 8 || vm.user.username.length > 20) {
						vm.tips = "请输入长度为8-20的用户名长度！";
						isRight: false;
					} else {
						//2.检验密码
						if (vm.user.password == "") {
							vm.tips = "请输入密码！";
							isRight = false;
						} else if (vm.user.password.length < 6 || vm.user.password.length > 16) {
							vm.tips = "请输入长度为6-16的密码长度！";
							isRight = false;
						} else {
							//2.检验第二次输入的密码
							if (vm.user.repassword == "") {
								vm.tips = "请再次输入密码！";
								isRight = false;
							} else if (vm.user.password != vm.user.repassword) {
								vm.tips = "两次输入的密码不一致！";
								isRight = false;
							} else {
								vm.tips = "";
								vm.isRight = true;
							}
						}
					}
				}
			}
		})
	</script>

</body>

</html>